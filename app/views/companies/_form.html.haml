= bootstrap_form_for(@company) do |f|
  - if @company.errors.any?
    #error_explanation
      %h2
        = pluralize(@company.errors.count, "error")
        prohibited this company from being saved:
      %ul
        - @company.errors.full_messages.each do |message|
          %li= message
  .row
    .col-md-3
      .form-group
        = f.text_field :name, class: "form-control", placeholder: "Name"
    .col-md-3
      .form-group
        = f.text_field :domain, class: "form-control", placeholder: "Domain"
    .col-md-3
      .form-group
        = f.text_field :mobile_domain, class: "form-control", placeholder: "Mobile Domain"
    .col-md-3
      .form-group
        = f.text_field :postsale_url, class: "form-control", placeholder: "PostSales Api URL"
    .col-md-3.required
      .form-group
        = f.text_field :sms_mask, class: "form-control", placeholder: "Sms Mask"
    .col-md-3.required
      .form-group
        = f.select :dead_status_ids, options_from_collection_for_select(::Status.of_leads, :id, :name, @company.dead_status_ids), {include_blank: "Please Select"}, class: 'form-control multiselect', multiple: true
    .col-md-3
      .form-group
        = f.select :new_status_id, options_from_collection_for_select(::Status.of_leads, :id, :name, @company.new_status_id), {include_blank: "Please Select", label: "New Lead Status"}, class: 'form-control'
    .col-md-3
      .form-group
        = f.select :expected_site_visit_id, options_from_collection_for_select(::Status.of_leads, :id, :name, @company.expected_site_visit_id), {include_blank: "Please Select"}, class: 'form-control'
    .col-md-3
      .form-group
        = f.select :site_visit_done_id, options_from_collection_for_select(::Status.of_leads, :id, :name, @company.site_visit_done_id), {include_blank: "Please Select"}, class: 'form-control'
    .col-md-3.required
      .form-group
        = f.select :booking_done_id, options_from_collection_for_select(::Status.of_leads, :id, :name, @company.booking_done_id), {include_blank: "Please Select"}, class: 'form-control'
    .col-md-3
      .form-group
        = f.select :hot_status_ids, options_from_collection_for_select(::Status.of_leads, :id, :name, @company.hot_status_ids), {include_blank: "Please Select"}, class: 'form-control multiselect', multiple: true
    .col-md-3
      .form-group
        = f.select :token_status_ids, options_from_collection_for_select(::Status.of_leads, :id, :name, @company.token_status_ids), {include_blank: "Please Select"}, class: 'form-control multiselect', multiple: true
    .col-md-6
      .form-group
        = f.select :allowed_fields, options_for_select((::Company.allowed_options).map{|k| [k.humanize, k]}, f.object.allowed_fields),{}, {class: "form-control multiselect", multiple: true}
    .col-md-6
      .form-group
        = f.select :popup_fields, options_for_select((::Company.detail_fields).map{|k| [k.humanize, k]}, f.object.popup_fields),{},{class: "form-control multiselect", multiple: true}
    .col-md-6
      .form-group
        = f.select :index_fields, options_for_select((::Company.detail_fields).map{|k| [k.humanize, k]}, f.object.index_fields),{},{class: "form-control multiselect", multiple: true}
    .col-md-6
      .form-group
        = f.select :required_fields, options_for_select((::Company.required_options).map{|k| [k.humanize, k]}, f.object.required_fields),{include_blank: false, include_hidden: false}, {class: "form-control multiselect", multiple: true}
    .col-md-6
      .form-group
        = f.select :visits_allowed_fields, options_for_select((::Company.visits_allowed_options).map{|k| [k.humanize, k]}, f.object.visits_allowed_fields),{include_blank: false, include_hidden: false}, {class: "form-control multiselect", multiple: true}
    .col-md-6
      .form-group
        = f.label :lead_status
        = f.collection_select :status_ids, Status.all, :id, :name, { hide_label: 'true' },{class: "form-control multiselect", multiple: true}
    .col-md-6
      .form-group
        = f.label :enquiry_sources
        = f.collection_select :source_ids, Source.all, :id, :name, { hide_label: 'true' },{class: "form-control multiselect", multiple: true}
    .w-100
    .col-md-4
      .form-group
        %label.col-sm-12.control-label{:for => "exampleInputFile"} Upload Logo:
        .col-sm-10
          = image_tag "blank_user.jpg", class: "edit-profile-img img-circle", alt: "Company Icon"
          = f.file_field :logo, :class => 'form-control ', hide_label: true
          %p.help-block Jpg, Png Format allowed max size 500 KB
    .col-md-4
      .form-group
        %label.col-sm-12.control-label{:for => "exampleInputFile"} Upload Icon:
        .col-sm-10
          = image_tag "blank_user.jpg", class: "edit-profile-img img-circle", alt: "Company Icon"
          = f.file_field :icon, :class => 'form-control', hide_label: true
          %p.help-block Jpg, Png Format allowed max size 500 KB
    .col-md-4
      .form-group
        %label.col-sm-12.control-label{:for => "exampleInputFile"} Upload Favicon:
        .col-sm-10
          = image_tag "blank_user.jpg", class: "edit-profile-img img-circle", alt: "Company Icon"
          = f.file_field :favicon, :class => 'form-control', hide_label: true
          %p.help-block Jpg, Png Format allowed max size 500 KB
    .w-100
    .col-md-4
      = f.check_box :requirement
    .w-100
    .col-md-12
      .form-group
        %label.col-sm-2.control-label{:for => "exampleInputFile"} Stages:
        #company_stages.row
          = f.fields_for :company_stages do |reason|
            = render "company_stage_fields", :f => reason
          .links.m-4
            = link_to_add_association "Add Stage", f, :company_stages, class: "btn btn-primary"
    .w-100
    %hr
    .col-md-12
      .form-group
        %label.col-sm-2.control-label{:for => "exampleInputFile"} Rejection Reasons:
        #reasons.row
          = f.fields_for :reasons do |reason|
            = render "reason_fields", :f => reason
          .links.m-4
            = link_to_add_association "Add Reason", f, :reasons, class: "btn btn-primary"
    .w-100
    - if f.object.persisted?
      %hr
      .col-md-12
        .form-group
          %label.col-sm-2.control-label{:for => "exampleInputFile"} Map Role Status:
          #reasons.row
            = f.fields_for :role_statuses do |status|
              = render "role_status_fields", :f => status
            .links.m-4
              = link_to_add_association "Map Role Status", f, :role_statuses, class: "btn btn-primary"
      .w-100
    .col-md-12
      .form-group
        %label.col-sm-2.control-label{:for => "exampleInputFile"} Custom Fields:
        #magic_fields.row
          = f.fields_for :magic_fields do |mf|
            = render "magic_field_fields", :f => mf
          .links.m-4
            = link_to_add_association "Add Custom Fields", f, :magic_fields, class: "btn btn-primary"
    .w-100
    .col-md-12
      .form-group
        %label.col-sm-2.control-label{:for => "exampleInputFile"} Custom Labels:
        #custom_labels.row
          = f.fields_for :custom_labels do |cl|
            = render "custom_label_fields", :f => cl
          .links.m-4
            = link_to_add_association "Add Custom Labels", f, :custom_labels, class: "btn btn-primary"
    .w-100
    .col-md-12
      %label.mb-3.control-label{:for => "exampleInputFile"} Notification Events:
      = f.select :events, options_for_select((::Company::EVENTS).map{|k| [k.humanize, k]}, f.object.events),{include_blank: false, include_hidden: false}, {class: "form-control multiselect", multiple: true}
    .w-100
    = render partial: 'setting', locals: {f: f}
    .w-100
    .col-md-12
      %label.mb-3.control-label{:for => "exampleInputFile"} Exotel Integration:
      .row
        = f.fields_for :exotel_integration do |ei|
          .col-md-2
            = ei.text_field :title, class: 'form-control'
          .col-md-2
            = ei.text_field :integration_key,  :class=>"form-control"
          .col-md-2
            = ei.text_field :token, class: "form-control"
          .col-md-2
            = ei.text_field :sid, class: "form-control"
          .col-md-2
            = ei.text_field :callback_url, class: "form-control"
          .col-md-2.d-flex.align-items-center.justify-content-center
            = ei.check_box :active
    .w-100
    .col-md-12
      %label.mb-3.control-label{:for => "exampleInputFile"} MailChimp Integration:
      .row
        = f.fields_for :mailchimp_integration do |mc|
          .col-md-2
            = mc.text_field :integration_key,  :class=>"form-control"
          .col-md-2
            = mc.text_field :token, class: "form-control"
          .col-md-2.d-flex.align-items-center.justify-content-center
            = mc.check_box :active
    .col-md-12
      %label.mb-3.control-label{:for => "exampleInputFile"} Mcube Integration:
      .row
        = f.fields_for :mcube_integration do |ei|
          .col-md-2
            = ei.text_field :title, class: 'form-control'
          .col-md-2
            = ei.text_field :integration_key,  :class=>"form-control"
          .col-md-6
            = ei.text_field :callback_url, class: "form-control"
          .col-md-2.d-flex.align-items-center.justify-content-center
            = ei.check_box :active
    .col-md-12
      %label.mb-3.control-label{:for => "exampleInputFile"} Sms Integration:
      .row
        = f.fields_for :sms_integration do |si|
          .col-md-2
            = si.text_field :title, class: 'form-control'
          .col-md-2
            = si.text_field :integration_key,  :class=>"form-control"
          .col-md-6
            = si.text_field :url, class: "form-control"
          .col-md-2.d-flex.align-items-center.justify-content-center
            = si.check_box :active
    .w-100
    .col-md-12
      %label.mb-3.control-label{:for => "exampleInputFile"} Push Notification Setting:
      .row
        = f.fields_for :push_notification_setting do |pn|
          .col-md-4
            = pn.text_field :token,  :class=>"form-control"
          .col-md-4
            = pn.text_field :project_key, class: "form-control"
          .col-md-4.d-flex.align-items-center.justify-content-center
            = pn.check_box :is_active
    .w-100
    .col-md-12
      %label.mb-3.control-label{:for => "exampleInputFile"} Mcube Settings:
      #mcube_groups.row.m-0
        = f.fields_for :mcube_groups do |mf|
          = render "mcube_group_fields", :f => mf
        .links.m-4
          = link_to_add_association "Add Mcube Group", f, :mcube_groups, class: "btn btn-primary"
    .w-100
    %hr
    .col-md-3
      .form-group
        = f.email_field :default_from_email, class: "form-control", placeholder: "Default From Email", label: "Default From Email", required: true
    .col-md-3.d-flex.align-items-center.justify-content-center
      .form-group
        = f.check_box :remove_closed
    .col-md-6
      .form-group
        = f.text_area :description, class: "form-control", placeholder: "Description"
    %div{align: "center"}
      .col-md-12
        .form-group
          = button_tag type: "submit", class: "btn btn-primary", data: {disable_with: "Please Wait..."} do
            = fa_icon "floppy-o"
            Save
          = link_to companies_path, class: "btn btn-danger" do
            = fa_icon "close"
            Cancel
:javascript
  $('.multiselect').multiSelect();
